<!DOCTYPE html>
<html lang="pt-br">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Equipe [ODIO] - Oficial</title>
<script src="https://cdn.tailwindcss.com"></script>
<link href="https://fonts.googleapis.com/css2?family=Oswald:wght@400;700&display=swap" rel="stylesheet">

<style>
body { font-family: 'Oswald', sans-serif; background: #050505; color: #eee; }
.admin-only { display: none; }
.admin-active .admin-only { display: revert; }
.equipe { padding: 10px; margin:5px 0; border-radius:8px; color:#000; }
button{ cursor:pointer; }
</style>
</head>
<body class="pb-10">

<!-- BANNER -->
<section class="relative w-full h-[300px] md:h-[400px] bg-zinc-900 border-b-4 border-red-600">
<img id="bannerImg" src="https://images.alphacoders.com" class="w-full h-full object-cover opacity-60">
</section>

<!-- NAV -->
<nav class="max-w-6xl mx-auto flex justify-between items-center p-6 bg-zinc-900 border-b border-zinc-800">

<div class="flex gap-4">
<button onclick="abrirModal()" class="bg-red-600 px-6 py-2 rounded text-xs font-bold uppercase">Alistar-se</button>
<button onclick="abrirLogin()" class="bg-blue-600 px-6 py-2 rounded text-xs font-bold uppercase">Login</button>
</div>

<div class="flex gap-3">
<button onclick="loginAdmin()">Painel Admin</button>
<button onclick="logoutAdmin()" class="text-red-600 text-xs uppercase font-bold">Sair</button>
</div>

</nav>

<main class="max-w-6xl mx-auto p-4 mt-8 space-y-10">

<!-- ADMIN -->
<section class="admin-only space-y-6">
<div class="bg-zinc-900 p-6 rounded border-2 border-yellow-600">

<h3 class="text-yellow-500 font-bold uppercase mb-3">Alterar Banner</h3>

<input type="file" id="bannerLocal" accept="image/*" class="mb-2 text-xs">
<button onclick="uploadLocalBanner()" class="bg-green-600 px-3 py-1 text-xs rounded">Usar imagem local</button>

<div class="mt-3">
<input id="bannerLink" placeholder="Link da imagem online" class="w-full bg-black border border-zinc-700 p-2 text-white mb-2">
<button onclick="usarLinkBanner()" class="bg-blue-600 px-3 py-1 text-xs rounded">Usar link</button>
</div>

</div>
</section>

</main>

<script type="module">

import { initializeApp } from "https://www.gstatic.com/firebasejs/12.9.0/firebase-app.js";
import { getFirestore, doc, getDoc, setDoc, onSnapshot } from "https://www.gstatic.com/firebasejs/12.9.0/firebase-firestore.js";

const firebaseConfig = {
  apiKey: "AIzaSyDkwukyKZVEZKiP4J75tkUNDisqaC4KLlk",
  authDomain: "equipeodio-715f6.firebaseapp.com",
  projectId: "equipeodio-715f6",
  storageBucket: "equipeodio-715f6.firebasestorage.app",
  messagingSenderId: "399735990964",
  appId: "1:399735990964:web:6baa2428bc49c23d7845e1"
};

const app = initializeApp(firebaseConfig);
const db = getFirestore(app);
const docRef = doc(db,"site","dados");

let bannerSalvo="https://images.alphacoders.com";
let isAdmin=false;

async function inicializar(){ 
  const snap = await getDoc(docRef);
  if(!snap.exists()) await setDoc(docRef,{banner:bannerSalvo});
}
await inicializar();

onSnapshot(docRef, snap=>{
  if(snap.exists()){
    const d = snap.data();
    bannerSalvo=d.banner||bannerSalvo;
    document.getElementById("bannerImg").src=bannerSalvo;
  }
});

async function salvarBanner(){
  await setDoc(docRef,{banner:bannerSalvo},{merge:true});
}

/* ADMIN */

window.loginAdmin = ()=>{
  const senha = prompt("Senha Admin:");
  if(senha==="123"){
    isAdmin=true;
    document.body.classList.add("admin-active");
  } else if(senha!==null){
    alert("Senha incorreta!");
  }
};

window.logoutAdmin = ()=>{
  isAdmin=false;
  document.body.classList.remove("admin-active");
};

/* BANNER LOCAL */

window.uploadLocalBanner = ()=>{
  const file = document.getElementById("bannerLocal").files[0];
  if(!file){ alert("Selecione uma imagem"); return; }

  const reader = new FileReader();
  reader.onload = async function(e){
    bannerSalvo = e.target.result;
    await salvarBanner();
  };
  reader.readAsDataURL(file);
};

/* BANNER LINK */

window.usarLinkBanner = async ()=>{
  const link = document.getElementById("bannerLink").value.trim();
  if(!link){ alert("Insira um link v√°lido"); return; }

  bannerSalvo = link;
  await salvarBanner();
};

</script>
</body>
</html>
